<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio</title>
  <link rel="stylesheet" href="style.css">
  <style>
/* Enhanced Windows XP error dialog styling */
.xp-error-dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #ECE9D8;
    width: 340px;
    z-index: 100000;
    font-family: 'Tahoma', sans-serif;
    display: flex;
    flex-direction: column;
    border: 1px solid #0054E3;
    border-radius: 3px;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
}

.xp-error-header {
    background: linear-gradient(to right, #0058E6 0%, #3A93FF 100%);
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 8px;
}

.xp-error-header .title-text {
    display: flex;
    align-items: center;
    gap: 6px;
    color: white;
    font-size: 13px;
    font-weight: bold;
    user-select: none;
}

.xp-error-header .title-text img {
    width: 16px;
    height: 16px;
}

.xp-error-header .close-btn {
    width: 21px;
    height: 21px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(to bottom, #F0F0F0 0%, #E3E3E3 100%);
    border: 1px solid #7C7C7C;
    border-radius: 3px;
    color: #000;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 0 1px rgba(255, 255, 255, 0.8);
}

.xp-error-header .close-btn:hover {
    background: linear-gradient(to bottom, #FFE8E8 0%, #FFC4C4 100%);
    border-color: #BE4646;
}

.xp-error-header .close-btn:active {
    background: #ECA4A4;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.1);
}

.xp-error-content {
    padding: 14px 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    background: #ECE9D8;
    min-height: 60px;
}

.xp-error-icon {
    width: 32px;
    height: 32px;
    flex-shrink: 0;
}

.xp-error-message {
    font-size: 11px;
    line-height: 1.4;
    color: #000;
    max-width: 250px;
}

.xp-error-buttons {
    padding: 14px 12px;
    display: flex;
    justify-content: center;
    gap: 6px;
    background: #ECE9D8;
    border-top: 1px solid #C7C7C7;
}

.xp-error-button {
    min-width: 75px;
    height: 23px;
    padding: 0 12px;
    background: linear-gradient(to bottom, #FEFEFE 0%, #E6E6E6 50%, #E0E0E0 100%);
    border: 1px solid #888888;
    border-radius: 3px;
    font-size: 11px;
    font-family: 'Tahoma', sans-serif;
    color: #000;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 1px rgba(255, 255, 255, 1);
}

.xp-error-button:hover {
    background: linear-gradient(to bottom, #F7F7F7 0%, #E6E6E6 50%, #DEDEDE 100%);
    border-color: #777777;
}

.xp-error-button:active {
    background: #E0E0E0;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.1);
    transform: translateY(1px);
    border-color: #999999;
}

/* Add focus state for keyboard navigation */
.xp-error-button:focus {
    outline: 1px dotted #000;
    outline-offset: -4px;
}
    
    /* Desktop icon selection styles */
    .desktop-icon {
      position: relative;
      cursor: default;
      -webkit-user-select: none;
      user-select: none;
    }
    
    .desktop-icon.selected::before {
      content: "";
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background-color: rgba(11, 97, 255, 0.4);
      border: 1px dotted #fff;
      z-index: -1;
      border-radius: 3px;
    }
    
    .desktop-icon:active span {
      color: #e9e9e9;
    }
    
    /* Start menu item hover styles */
    .start-menu-item:hover {
      background-color: #2D71E6;
      color: white;
      border-radius: 3px;
    }
    
    .start-menu-item:hover .label,
    .start-menu-item:hover .intent,
    .start-menu-item:hover .program {
      color: white;
    }
  </style>
</head>

<body>
  <div id="background-wrapper">
    <div id="desktop-icons">
      <div class="desktop-icon" id="my-computer" data-window="my-computer-window">
        <img src="Windows XP Icons/My Computer.png" alt="My Computer">
        <span>My Computer</span>
      </div>
      <div class="desktop-icon" id="projects" data-window="projects-window">
        <img src="Windows XP Icons/My Pictures.png" alt="My Projects">
        <span>My Projects</span>
      </div>
      <div class="desktop-icon" id="skills" data-window="skills-window">
        <img src="Windows XP Icons/XPSP3RES Unknown 1.png" alt="My Skills">
        <span>My Skills</span>
      </div>
    </div>
    <div id="windows-container"></div>
  </div>
<template id="error-dialog-template">
  <div class="xp-error-dialog">
    <div class="xp-error-header">
      <div class="title-text">
        <span>Windows</span>
      </div>
      <div class="close-btn"><img src="Windows XP Icons/Exit.png"></div>
    </div>
    <div class="xp-error-content">
      <img src="Windows XP Icons/Alert.png" class="xp-error-icon" alt="Error">
      <div class="xp-error-message">This feature is not available yet. Please try again in a future update.</div>
    </div>
    <div class="xp-error-buttons">
      <button class="xp-error-button">OK</button>
    </div>
  </div>
</template>


<template id="shutdown-popup-template">
  <div class="xp-shutdown-dialog">
    <div class="xp-shutdown-header">
      <div class="title-text">
        <img src="Windows XP Icons/Power.png" alt="Power Icon">
        <span>Turn off computer</span>
      </div>
      <div class="close-btn">
        <img src="Windows XP Icons/Exit.png" alt="Close" style="width: 16px; height: 16px;">
      </div>
    </div>
    <div class="xp-shutdown-content">
      <div class="shutdown-options">
        <div class="shutdown-option" title="Shut Down">
          <img src="Windows XP Icons/Power.png" alt="Shutdown Icon">
          <span>Turn Off</span>
        </div>
      </div>
    </div>
  </div>
</template>

  <div class="taskbar" style="z-index: 999999999999;">
    <div class="main-section">
      <input id="start-menu-active" type="checkbox">
      <div class="taskbar-footer">Date Display Here</div>

      <label class="start-button" for="start-menu-active">
        start
      </label>

      <div class="start-menu">
        <div class="start-menu-header">
          <div class="account-image-wrapper">
          </div>
          <h1 class="account-name">Urranki Nikhil</h1>
        </div>
        <div class="start-menu-body">
          <div class="start-menu-favorites">
            <div class="start-menu-item intent-item" data-window="about-window">
              <div class="icon"
                style="background-image:url('Windows XP Icons/Speech.png')">
              </div>
              <div class="label">
                <div class="intent">About Me</div>
                <div class="program">Personal Portfolio</div>
              </div>
            </div>
            <div class="divider"></div>
            <div class="start-menu-item favorite-item" data-window="projects-window">
              <div class="icon"
                style="background-image:url('Windows XP Icons/My Pictures.png')"></div>
              <div class="label">My Projects</div>
            </div>
            <div class="start-menu-item favorite-item" data-window="skills-window">
              <div class="icon"
                style="background-image:url('Windows XP Icons/XPSP3RES Unknown 1.png')"></div>
              <div class="label">My Skills</div>
            </div>
          </div>
          <div class="start-menu-shortcuts">
            <div class="start-menu-item my-item" data-window="my-computer-window">
              <div class="icon"
                style="background-image:url('Windows XP Icons/My Computer.png')">
              </div>
              <div class="label">My Computer</div>
            </div>
            
            <div class="start-menu-item my-item">
              <div class="icon" style="background-image:url('Windows XP Icons/Removable Media.png');"></div>
              <div class="label">
                <a href="resume.pdf" download="resume.pdf" style="text-decoration: none; color: inherit;">Resume</a>
              </div>
            </div>
            <div class="start-menu-item my-item" data-window="projects-window">
              <div class="icon"
                style="background-image:url('Windows XP Icons/My Pictures.png')">
              </div>
              <div class="label">My Projects</div>
            </div>
            <div class="start-menu-item my-item not-available">
              <div class="icon"
                style="background-image:url('Windows XP Icons/My Music.png')">
              </div>
              <div class="label">My Playlist</div>
            </div>
            <div class="start-menu-item my-item" data-window="network-window">
              <div class="icon"
                style="background-image:url('Windows XP Icons/Workgroup.png')">
              </div>
              <div class="label">My Network</div>
            </div>
            <div class="divider"></div>

            <div class="start-menu-item not-available">
              <div class="icon"
                style="background-image:url('Windows XP Icons/Print photos.png')">
              </div>
              <div class="label">Contact Form</div>
            </div>
            <div class="divider"></div>
            <div class="start-menu-item not-available">
              <div class="icon"
                style="background-image:url('Windows XP Icons/Get Support.png')">
              </div>
              <div class="label">Help and Support</div>
            </div>
          </div>
        </div>
        <div class="start-menu-footer">
          <span class="power-off"><img src="Windows XP Icons/Power.png"><label>power-off</label>
          </span>
        </div>

      </div>
      <div class="taskbar-opened" id="taskbar-opened"></div>

    </div>

  </div>

  <script src="script.js"></script>
  <script>
    // Add error message functionality for unavailable features
    document.addEventListener('DOMContentLoaded', function() {
      const powerOffElement = document.querySelector('.power-off');

      // Function to show error dialog with authentic Windows XP styling
      function showXpError(customMessage) {
        // Clone the template
        const errorDialog = document.getElementById('error-dialog-template').content.cloneNode(true);
        document.body.appendChild(errorDialog);
        
        const dialog = document.querySelector('.xp-error-dialog');
        const closeBtn = dialog.querySelector('.close-btn');
        const okBtn = dialog.querySelector('.xp-error-button');
        
        if (customMessage) {
          dialog.querySelector('.xp-error-message').textContent = customMessage;
        }
        
        let isDragging = false;
        let offsetX, offsetY;
        
        dialog.querySelector('.xp-error-header').addEventListener('mousedown', function(e) {
          if (e.target !== closeBtn) {
            isDragging = true;
            offsetX = e.clientX - dialog.getBoundingClientRect().left;
            offsetY = e.clientY - dialog.getBoundingClientRect().top;
          }
        });
        
        document.addEventListener('mousemove', moveDialog);
        document.addEventListener('mouseup', stopDragging);
        
        function moveDialog(e) {
          if (isDragging) {
            dialog.style.left = (e.clientX - offsetX) + 'px';
            dialog.style.top = (e.clientY - offsetY) + 'px';
            dialog.style.transform = 'none'; // Remove the centering transform
          }
        }
        
        function stopDragging() {
          isDragging = false;
        }
        
        // Close dialog handlers
        function closeDialog() {
          dialog.remove();
          document.removeEventListener('mousemove', moveDialog);
          document.removeEventListener('mouseup', stopDragging);
          document.removeEventListener('keydown', closeOnKey);
        }
        
        closeBtn.addEventListener('click', closeDialog);
        okBtn.addEventListener('click', closeDialog);
        
        // Add keyboard support - close on Enter or Escape key
        function closeOnKey(e) {
          if (e.key === 'Enter' || e.key === 'Escape') {
            closeDialog();
          }
        }
        
        document.addEventListener('keydown', closeOnKey);
        
        // Focus the OK button for keyboard accessibility
        okBtn.focus();
        
        // Play classic Windows error sound
        const errorSound = new Audio('Windows XP Sounds/Error.wav');
        errorSound.play();
      }
      
      // Add click handlers to unavailable items
      const unavailableItems = document.querySelectorAll('.not-available');
      unavailableItems.forEach(item => {
        item.addEventListener('click', function() {
          showXpError("This feature is not available yet. Please try again in a future update.");
        });
      });
      
      // Add click handlers for desktop icons
      const desktopIcons = document.querySelectorAll('.desktop-icon');
      
      // Track click timing for double-click
      let lastClickTime = 0;
      let clickedIcon = null;
      
      // Function to remove selection from all desktop icons
      function clearIconSelection() {
        desktopIcons.forEach(icon => {
          icon.classList.remove('selected');
        });
      }
      
      // Function to open a window
      function openWindow(windowId) {
        let contentUrl, title;
        
        // Set up window parameters based on the icon clicked
        switch(windowId) {
          case 'my-computer-window':
            contentUrl = 'my-computer.html';
            title = 'My Computer';
            break;
          case 'projects-window':
            contentUrl = 'projects.html';
            title = 'My Projects';
            break;
          case 'skills-window':
            contentUrl = 'skills.html';
            title = 'My Skills';
            break;
          case 'about-window':
            contentUrl = 'about.html';
            title = 'About Me';
            break;
          case 'network-window':
            contentUrl = 'network.html';
            title = 'My Network';
            break;
        }
        
        // Post message to parent to open window
        window.parent.postMessage({
          action: 'openWindow',
          windowId: windowId,
          title: title,
          contentUrl: contentUrl
        }, '*');
      }
      
      // Add double-click behavior to desktop icons
      desktopIcons.forEach(icon => {
        icon.addEventListener('click', function(e) {
          const currentTime = new Date().getTime();
          const doubleClickThreshold = 500; // ms
          
          // First clear all selected icons if clicking a new icon
          if (clickedIcon !== this) {
            clearIconSelection();
            clickedIcon = this;
          }
          
          // Add selected class to this icon
          this.classList.add('selected');
          
          // Check if it's a double-click
          if (currentTime - lastClickTime < doubleClickThreshold) {
            // It's a double-click - open the window
            const windowId = this.getAttribute('data-window');
            if (windowId) {
              openWindow(windowId);
            }
          }
          
          lastClickTime = currentTime;
        });
      });
      
      // Add click handlers for Start Menu items (still single-click)
      const startMenuItems = document.querySelectorAll('.start-menu-item:not(.not-available)');
      startMenuItems.forEach(item => {
        item.addEventListener('click', function() {
          // Get window ID from the data attribute
          const windowId = this.getAttribute('data-window');
          
          // Close the start menu when an item is clicked
          document.getElementById('start-menu-active').checked = false;
          
          // Check if we should open a window
          if (windowId) {
            openWindow(windowId);
          }
        });
      });
      
      // Add click listener to document to clear icon selection
      document.addEventListener('click', function(e) {
        // If the click wasn't on a desktop icon, clear selection
        if (!e.target.closest('.desktop-icon')) {
          clearIconSelection();
        }
      });
      
      // Update the date/time in the taskbar
      function updateClock() {
        const now = new Date();
        const hours = now.getHours();
        const minutes = now.getMinutes();
        const ampm = hours >= 12 ? 'PM' : 'AM';
        const displayHours = hours % 12 || 12;
        const displayMinutes = minutes < 10 ? '0' + minutes : minutes;
        
        document.querySelector('.taskbar-footer').textContent = `${displayHours}:${displayMinutes} ${ampm}`;
      }
    // Function to show the shutdown popup
    function showShutdownPopup() {
        // Clone the template
        const shutdownPopup = document.getElementById('shutdown-popup-template').content.cloneNode(true);
        document.body.appendChild(shutdownPopup);

        const dialog = document.querySelector('.xp-shutdown-dialog');
        const closeBtn = dialog.querySelector('.close-btn');
        const shutdownBtn = dialog.querySelector('.shutdown-option');
        
        // Remove the dialog from body
        document.body.removeChild(dialog);

        // Grayscale the background wrapper, taskbar, and body (in case the background image is on body)
        const bgWrapper = document.getElementById('background-wrapper');
        const taskbar = document.querySelector('.taskbar');
        bgWrapper.style.transition = 'filter 5s ease-in-out';
        bgWrapper.style.filter = 'grayscale(100%)';
        taskbar.style.transition = 'filter 5s ease-in-out';
        taskbar.style.filter = 'grayscale(100%)';
        document.body.style.transition = 'filter 5s ease-in-out';
        document.body.style.filter = 'grayscale(100%)';
        
        // Create an overlay outside the normal hierarchy
        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.left = '0';
        overlay.style.top = '0';
        overlay.style.width = '100%';
        overlay.style.height = '100%';
        overlay.style.backgroundColor = 'transparent';
        overlay.style.zIndex = '10000000';
        overlay.style.pointerEvents = 'none';

        // Create a container that won’t inherit grayscale
        const dialogContainer = document.createElement('div');
        dialogContainer.style.position = 'absolute';
        dialogContainer.style.left = '50%';
        dialogContainer.style.top = '50%';
        dialogContainer.style.transform = 'translate(-50%, -50%)';
        dialogContainer.style.pointerEvents = 'auto';
        dialogContainer.style.isolation = 'isolate';
        dialogContainer.style.filter = 'none';

        // Keep the dialog fully colorful
        dialog.style.filter = 'none';
        const allElements = dialog.querySelectorAll('*');
        allElements.forEach(el => {
            el.style.filter = 'none';
        });

        // Append the dialog to our overlay
        dialogContainer.appendChild(dialog);
        overlay.appendChild(dialogContainer);
        document.documentElement.appendChild(overlay);

        // Play shutdown sound
        const shutdownSound = new Audio('Windows XP Sounds/Windows XP Shutdown.wav');
        shutdownSound.play();

        // Close the dialog
        function closeDialog() {
            overlay.remove();
            bgWrapper.style.filter = '';
            taskbar.style.filter = '';
            document.body.style.filter = '';
        }
        closeBtn.addEventListener('click', closeDialog);

        // Shutdown button handler
        shutdownBtn.addEventListener('click', function () {
            // Create the Windows XP shutdown animation overlay
            const shutdownOverlay = document.createElement('div');
            shutdownOverlay.style.position = 'fixed';
            shutdownOverlay.style.left = '0';
            shutdownOverlay.style.top = '0';
            shutdownOverlay.style.width = '100%';
            shutdownOverlay.style.height = '100%';
            shutdownOverlay.style.backgroundColor = '#000000';
            shutdownOverlay.style.zIndex = '99999999';
            shutdownOverlay.style.opacity = '0';
            shutdownOverlay.style.transition = 'opacity 1s ease-in-out';

            // Create the shutdown text
            const shutdownText = document.createElement('div');
            shutdownText.textContent = 'Windows is shutting down...';
            shutdownText.style.color = '#ffffff';
            shutdownText.style.fontFamily = 'Tahoma, sans-serif';
            shutdownText.style.fontSize = '24px';
            shutdownText.style.position = 'absolute';
            shutdownText.style.left = '50%';
            shutdownText.style.top = '50%';
            shutdownText.style.transform = 'translate(-50%, -50%)';
            shutdownText.style.opacity = '0';
            shutdownText.style.transition = 'opacity 1s ease-in-out';

            document.body.appendChild(shutdownOverlay);
            shutdownOverlay.appendChild(shutdownText);

            // Play shutdown sound
            const shutdownSound = new Audio('Windows XP Sounds/Windows XP Shutdown.wav');
            shutdownSound.play();

            // Fade out everything and show shutdown screen
            setTimeout(() => {
                bgWrapper.style.transition = 'opacity 1s ease-in-out';
                bgWrapper.style.opacity = '0';
                taskbar.style.transition = 'opacity 1s ease-in-out';
                taskbar.style.opacity = '0';
                dialog.style.transition = 'opacity 1s ease-in-out';
                dialog.style.opacity = '0';

                shutdownOverlay.style.opacity = '1';
                setTimeout(() => {
                    shutdownText.style.opacity = '1';
                }, 500);

                // Add progress bar
                const progressBar = document.createElement('div');
                progressBar.style.position = 'absolute';
                progressBar.style.left = '50%';
                progressBar.style.top = '60%';
                progressBar.style.transform = 'translate(-50%, -50%)';
                progressBar.style.width = '300px';
                progressBar.style.height = '20px';
                progressBar.style.backgroundColor = '#333';
                progressBar.style.border = '2px solid #666';
                progressBar.style.borderRadius = '10px';
                progressBar.style.overflow = 'hidden';

                const progress = document.createElement('div');
                progress.style.width = '0%';
                progress.style.height = '100%';
                progress.style.backgroundColor = '#0054E3';
                progress.style.transition = 'width 2.5s linear';

                progressBar.appendChild(progress);
                shutdownOverlay.appendChild(progressBar);

                setTimeout(() => {
                    progress.style.width = '100%';
                    
                    // Force close the tab after animation
                    setTimeout(() => {
                        // Create a form that will submit to a blank page
                        const form = document.createElement('form');
                        form.method = 'POST';
                        form.action = 'about:blank';
                        document.body.appendChild(form);
                        form.submit();
                        
                        // Also try these alternative methods
                        window.location.href = 'about:blank';
                        window.open('', '_self', '');
                        window.close();
                    }, 3000);
                }, 100);
            }, 500);
        });
    }

      // Add click handler to the power-off element
      powerOffElement.addEventListener('click', showShutdownPopup);

      
       updateClock();
      setInterval(updateClock, 60000); // Update every minute
    });
  </script>
</body>

</html>